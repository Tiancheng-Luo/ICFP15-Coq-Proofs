<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>AheadOfNI</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library AheadOfNI</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">stepPreservesRewind</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">AheadOf</span> (<span class="id" title="var">C</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">heap</span>) : <span class="id" title="var">pool</span> -&gt; <span class="id" title="var">pool</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
| <span class="id" title="var">aheadOfNoTX</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">tid</span> <span class="id" title="var">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tid</span> &lt; <span class="id" title="var">C</span> -&gt; <span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> (<span class="id" title="var">Single</span>(<span class="id" title="var">noTXThread</span> <span class="id" title="var">tid</span> <span class="id" title="var">e</span>)) (<span class="id" title="var">Single</span>(<span class="id" title="var">noTXThread</span> <span class="id" title="var">tid</span> <span class="id" title="var">e</span>))<br/>
| <span class="id" title="var">aheadOfTXRO</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">e0</span> <span class="id" title="var">L</span> <span class="id" title="var">L'</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tid</span> &lt; <span class="id" title="var">C</span> -&gt; <span class="id" title="var">rv</span> &lt; <span class="id" title="var">C</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">replay</span> <span class="id" title="var">H</span> (<span class="id" title="var">txThread</span> <span class="id" title="var">false</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">e0</span> <span class="id" title="var">L</span> <span class="id" title="var">e</span>) <span class="id" title="var">H</span> (<span class="id" title="var">txThread</span> <span class="id" title="var">false</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">e0</span> <span class="id" title="var">L'</span> <span class="id" title="var">e'</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> (<span class="id" title="var">Single</span>(<span class="id" title="var">txThread</span> <span class="id" title="var">false</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">e0</span> <span class="id" title="var">L</span> <span class="id" title="var">e</span>)) (<span class="id" title="var">Single</span>(<span class="id" title="var">txThread</span> <span class="id" title="var">false</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">e0</span> <span class="id" title="var">L'</span> <span class="id" title="var">e'</span>))<br/>
| <span class="id" title="var">aheadOfTXRW</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">b</span> <span class="id" title="var">e0</span> <span class="id" title="var">L</span> <span class="id" title="var">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tid</span> &lt; <span class="id" title="var">C</span> -&gt; <span class="id" title="var">rv</span> &lt; <span class="id" title="var">C</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> (<span class="id" title="var">Single</span>(<span class="id" title="var">txThread</span> <span class="id" title="var">b</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">e0</span> <span class="id" title="var">L</span> <span class="id" title="var">e</span>)) (<span class="id" title="var">Single</span>(<span class="id" title="var">txThread</span> <span class="id" title="var">b</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">e0</span> <span class="id" title="var">L</span> <span class="id" title="var">e</span>))<br/>
| <span class="id" title="var">replayPar</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> <span class="id" title="var">T1'</span> <span class="id" title="var">T2'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Disjoint</span> <span class="id" title="var">nat</span> (<span class="id" title="var">ids</span> <span class="id" title="var">T1</span>) (<span class="id" title="var">ids</span> <span class="id" title="var">T2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T1</span> <span class="id" title="var">T1'</span> -&gt; <span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T2</span> <span class="id" title="var">T2'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> (<span class="id" title="var">Par</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>) (<span class="id" title="var">Par</span> <span class="id" title="var">T1'</span> <span class="id" title="var">T2'</span>).<br/>

<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">abortAheadOfNI</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">C</span> <span class="id" title="var">tid</span> <span class="id" title="var">b</span> <span class="id" title="var">rv</span> <span class="id" title="var">wv</span> <span class="id" title="var">e0</span> <span class="id" title="var">L</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">chkpnt</span> <span class="id" title="var">HI</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">validate</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">wv</span> <span class="id" title="var">e0</span> <span class="id" title="var">b</span> <span class="id" title="var">L</span> <span class="id" title="var">H</span> (<span class="id" title="var">abort</span> <span class="id" title="var">chkpnt</span> <span class="id" title="var">HI</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Disjoint</span> <span class="id" title="var">nat</span> (<span class="id" title="var">Singleton</span> <span class="id" title="var">nat</span> <span class="id" title="var">tid</span>) (<span class="id" title="var">ids</span> <span class="id" title="var">T</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> -&gt; <span class="id" title="var">AheadOf</span> (<span class="id" title="var">S</span> <span class="id" title="var">C</span>) <span class="id" title="var">HI</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">genDeps</span>{{<span class="id" title="var">tid</span>; <span class="id" title="var">rv</span>; <span class="id" title="var">wv</span>; <span class="id" title="var">e0</span>; <span class="id" title="var">L</span>; <span class="id" title="var">b</span>; <span class="id" title="var">HI</span>; <span class="id" title="var">chkpnt</span>}}. <span class="id" title="tactic">induction</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">assert</span>(<span class="id" title="var">tid0</span> &lt;&gt; <span class="id" title="var">tid</span>). <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H5</span> <span class="id" title="var">tid</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">constructor</span>. <span class="id" title="var">copy</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">abortReleaseLocks</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">rewindIFFReplay</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">abortRewindSingleNI</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">invertHyp</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">rewindIFFReplay</span>. <span class="id" title="var">copy</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">rewindNoWrites</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHAheadOf1</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">solveIn</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">solveIn</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHAheadOf2</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="var">solveIn</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="var">solveIn</span>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">writeAheadOfNI</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">lock</span> <span class="id" title="var">lock'</span> <span class="id" title="var">L'</span> <span class="id" title="var">l</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">T'</span> <span class="id" title="var">C</span> <span class="id" title="var">L</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Disjoint</span> <span class="id" title="var">nat</span> (<span class="id" title="var">Singleton</span> <span class="id" title="var">nat</span> <span class="id" title="var">tid</span>) (<span class="id" title="var">ids</span> <span class="id" title="var">T</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">acquireLock</span> <span class="id" title="var">l</span> <span class="id" title="var">v'</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">b</span> <span class="id" title="var">L</span> <span class="id" title="var">lock</span> <span class="id" title="var">lock'</span> <span class="id" title="var">L'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> <span class="id" title="var">l</span> = <span class="id" title="var">Some</span>(<span class="id" title="var">v'</span>, <span class="id" title="var">lock</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> -&gt; <span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> (<span class="id" title="var">update</span> <span class="id" title="var">H</span> <span class="id" title="var">l</span> <span class="id" title="var">v</span> <span class="id" title="var">lock'</span>) <span class="id" title="var">T</span> <span class="id" title="var">T'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">assert</span>(<span class="id" title="var">tid</span> &lt;&gt; <span class="id" title="var">tid0</span>). <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H6</span> <span class="id" title="var">tid0</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>. <span class="id" title="var">solveIn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">rewindIFFReplay</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">writeSingleNI</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">invertHyp</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">rewindIFFReplay</span>. <span class="id" title="var">copy</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">rewindNoWrites</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;{<span class="id" title="tactic">apply</span> <span class="id" title="var">IHAheadOf1</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H4</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>. <span class="id" title="var">solveIn</span>. }<br/>
&nbsp;&nbsp;&nbsp;{<span class="id" title="tactic">apply</span> <span class="id" title="var">IHAheadOf2</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H4</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>. <span class="id" title="var">solveIn</span>. }<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">AheadOfNewerStamp</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">C</span> <span class="id" title="var">C'</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> -&gt; <span class="id" title="var">C'</span> &gt;= <span class="id" title="var">C</span> -&gt; <span class="id" title="var">AheadOf</span> <span class="id" title="var">C'</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span>[<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">omega</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">AheadOfAlloc</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">l</span> <span class="id" title="var">v</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> <span class="id" title="var">l</span> = <span class="id" title="var">None</span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> (<span class="id" title="var">update</span> <span class="id" title="var">H</span> <span class="id" title="var">l</span> <span class="id" title="var">v</span> (<span class="id" title="var">Unlocked</span> 0)) <span class="id" title="var">T</span> <span class="id" title="var">T'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">genDeps</span>{{<span class="id" title="var">l</span>; <span class="id" title="var">v</span>}}. <span class="id" title="tactic">induction</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">rewindIFFReplay</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">rewindAllocSingle</span> <span class="id" title="keyword">with</span>(<span class="id" title="var">v</span> := <span class="id" title="var">v</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">invertHyp</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">rewindIFFReplay</span>. <span class="id" title="var">copy</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">rewindNoWrites</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">commitAheadOfNI</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">tid</span> <span class="id" title="var">b</span> <span class="id" title="var">rv</span> <span class="id" title="var">e0</span> <span class="id" title="var">C</span> <span class="id" title="var">L</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">chkpnt</span> <span class="id" title="var">HI</span> <span class="id" title="var">HV</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id" title="var">validate</span> <span class="id" title="var">tid</span> <span class="id" title="var">rv</span> <span class="id" title="var">C</span> <span class="id" title="var">e0</span> <span class="id" title="var">b</span> <span class="id" title="var">L</span> <span class="id" title="var">H</span> (<span class="id" title="var">commit</span> <span class="id" title="var">chkpnt</span> <span class="id" title="var">HI</span> <span class="id" title="var">HV</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Disjoint</span> <span class="id" title="var">nat</span> (<span class="id" title="var">Singleton</span> <span class="id" title="var">nat</span> <span class="id" title="var">tid</span>) (<span class="id" title="var">ids</span> <span class="id" title="var">T</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> -&gt; <span class="id" title="var">AheadOf</span> (<span class="id" title="var">S</span> <span class="id" title="var">C</span>) <span class="id" title="var">HV</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">assert</span>(<span class="id" title="var">tid</span> &lt;&gt; <span class="id" title="var">tid0</span>). <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H5</span> <span class="id" title="var">tid0</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="var">solveIn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">rewindIFFReplay</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">commitRewindSingleNI</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">invertHyp</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">rewindIFFReplay</span>. <span class="id" title="var">copy</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">rewindNoWrites</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;{<span class="id" title="tactic">apply</span> <span class="id" title="var">IHAheadOf1</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="var">solveIn</span>. }<br/>
&nbsp;&nbsp;&nbsp;{<span class="id" title="tactic">apply</span> <span class="id" title="var">IHAheadOf2</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>. <span class="id" title="var">solveIn</span>. }<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">AheadOfNI</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">C</span> <span class="id" title="var">C'</span> <span class="id" title="var">H</span> <span class="id" title="var">H'</span> <span class="id" title="var">T1</span> <span class="id" title="var">T1'</span> <span class="id" title="var">T2</span> <span class="id" title="var">T2'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_step</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T1</span> <span class="id" title="var">C'</span> <span class="id" title="var">H'</span> <span class="id" title="var">T1'</span> -&gt; <span class="id" title="var">AheadOf</span> <span class="id" title="var">C</span> <span class="id" title="var">H</span> <span class="id" title="var">T2</span> <span class="id" title="var">T2'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Disjoint</span> <span class="id" title="var">nat</span> (<span class="id" title="var">ids</span> <span class="id" title="var">T1</span>) (<span class="id" title="var">ids</span> <span class="id" title="var">T2</span>) -&gt; <span class="id" title="var">AheadOf</span> <span class="id" title="var">C'</span> <span class="id" title="var">H'</span> <span class="id" title="var">T2</span> <span class="id" title="var">T2'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">genDeps</span>{{<span class="id" title="var">T2</span>; <span class="id" title="var">T2'</span>}}. <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">abortAheadOfNI</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">writeAheadOfNI</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHc_step</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H4</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">solveIn</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHc_step</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H4</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">solveIn</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. <span class="id" title="tactic">eapply</span> <span class="id" title="var">AheadOfNewerStamp</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">eapply</span> <span class="id" title="var">AheadOfAlloc</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. <span class="id" title="tactic">eapply</span> <span class="id" title="var">commitAheadOfNI</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. <span class="id" title="tactic">eapply</span> <span class="id" title="var">AheadOfNewerStamp</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *. <span class="id" title="tactic">eapply</span> <span class="id" title="var">AheadOfNewerStamp</span>; <span class="id" title="tactic">eauto</span>. } <br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>